<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Chosen Palette: Calm Harmony (Warm neutrals bg-stone-50, dark gray text text-stone-800, soft blue accent bg-sky-600, gentle orange highlight text-amber-600) -->
    <!-- Application Structure Plan: A task-oriented dashboard for caregivers with 5 core sections: Overview, Motor Skills, Communication, Cognition/Emotion, and Daily Care. This structure prioritizes quick access to actionable information over the linear format of the source reports, empowering caregivers to solve specific problems efficiently. -->
    <!-- Visualization & Content Choices: Brunnstrom stages visualized as an interactive HTML diagram. Aphasia types as interactive cards. Complications as an expandable grid. Recovery factors and post-stroke conditions as Chart.js bar/donut charts. Exercises organized in filterable accordions. This approach transforms static tables and lists into engaging, easy-to-digest components, enhancing user understanding and retention. Confirmed no SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <title>C·∫©m Nang Ph·ª•c H·ªìi Sau ƒê·ªôt Qu·ªµ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .nav-link { transition: all 0.3s ease; }
        .nav-link.active { color: #0284c7; border-bottom-color: #0284c7; font-weight: 700; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .accordion-button.open + .accordion-content { max-height: 2000px; }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center py-4">
                <h1 class="text-2xl md:text-3xl font-bold text-sky-700 mb-4 md:mb-0" data-i18n="appTitle">C·∫©m Nang Ph·ª•c H·ªìi Sau ƒê·ªôt Qu·ªµ</h1>
                <nav id="main-nav" class="flex flex-wrap justify-center gap-x-4 gap-y-2 md:gap-x-8">
                    <a href="#tong-quan" data-section="tong-quan" class="nav-link text-stone-600 border-b-2 border-transparent hover:text-sky-600 pb-1" data-i18n="navOverview">T·ªïng Quan</a>
                    <a href="#van-dong" data-section="van-dong" class="nav-link text-stone-600 border-b-2 border-transparent hover:text-sky-600 pb-1" data-i18n="navMotorSkills">V·∫≠n ƒê·ªông</a>
                    <a href="#giao-tiep" data-section="giao-tiep" class="nav-link text-stone-600 border-b-2 border-transparent hover:text-sky-600 pb-1" data-i18n="navCommunication">Giao Ti·∫øp</a>
                    <a href="#tu-duy" data-section="tu-duy" class="nav-link text-stone-600 border-b-2 border-transparent hover:text-sky-600 pb-1" data-i18n="navCognitionEmotion">T∆∞ Duy & Tinh Th·∫ßn</a>
                    <a href="#cham-soc" data-section="cham-soc" class="nav-link text-stone-600 border-b-2 border-transparent hover:text-sky-600 pb-1" data-i18n="navDailyCare">ChƒÉm S√≥c H√†ng Ng√†y</a>
                </nav>
                <div class="flex items-center mt-4 md:mt-0">
                    <button id="lang-vi-btn" class="px-3 py-1 rounded-full text-stone-700 bg-sky-100 hover:bg-sky-200 mr-2 border border-sky-300">VN</button>
                    <button id="lang-en-btn" class="px-3 py-1 rounded-full text-stone-600 bg-white hover:bg-stone-100 border border-stone-300">EN</button>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="tong-quan" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-stone-800 mb-4" data-i18n="journeyTitle">H√†nh Tr√¨nh Ph·ª•c H·ªìi To√†n Di·ªán</h2>
                <p class="max-w-3xl mx-auto text-lg text-stone-600" data-i18n="journeyDesc">Ph·ª•c h·ªìi sau ƒë·ªôt qu·ªµ l√† m·ªôt qu√° tr√¨nh l√¢u d√†i, ƒë√≤i h·ªèi s·ª± ki√™n tr√¨ v√† m·ªôt c√°ch ti·∫øp c·∫≠n to√†n di·ªán. ·ª®ng d·ª•ng n√†y cung c·∫•p c√°c chi·∫øn l∆∞·ª£c v√† th√¥ng tin c·∫ßn thi·∫øt ƒë·ªÉ h·ªó tr·ª£ ng∆∞·ªùi chƒÉm s√≥c, gi√∫p b·ªánh nh√¢n t·ªëi ƒëa h√≥a kh·∫£ nƒÉng ph·ª•c h·ªìi, t·ª´ v·∫≠n ƒë·ªông, giao ti·∫øp ƒë·∫øn t∆∞ duy v√† tinh th·∫ßn, nh·∫±m n√¢ng cao ch·∫•t l∆∞·ª£ng cu·ªôc s·ªëng.</p>
                <!-- Audio player for overview introduction -->
                <div class="mt-6">
                    <audio controls class="w-full max-w-sm mx-auto">
                        <source src="https://phanminhnhat.github.io/chamsocsaudotquy/audiooverview.mp3" type="audio/mp3">
                        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph·∫ßn t·ª≠ audio.
                    </audio>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h3 class="text-2xl font-semibold text-sky-700 mb-4" data-i18n="brunnstromTitle">C√°c Giai ƒêo·∫°n Ph·ª•c H·ªìi V·∫≠n ƒê·ªông (Brunnstrom)</h3>
                <p class="mb-6 text-stone-600" data-i18n="brunnstromDesc">Hi·ªÉu r√µ c√°c giai ƒëo·∫°n ph·ª•c h·ªìi gi√∫p b·∫°n nh·∫≠n bi·∫øt ti·∫øn tri·ªÉn v√† l·ª±a ch·ªçn b√†i t·∫≠p ph√π h·ª£p. S·ª± xu·∫•t hi·ªán c·ªßa co c·ª©ng (Giai ƒëo·∫°n 2-3) l√† m·ªôt d·∫•u hi·ªáu t√≠ch c·ª±c, cho th·∫•y n√£o b·ªô ƒëang t√°i t·∫°o k·∫øt n·ªëi th·∫ßn kinh. H√£y nh·∫•p v√†o t·ª´ng giai ƒëo·∫°n ƒë·ªÉ xem chi ti·∫øt.</p>
                <div id="brunnstrom-stages" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-7 gap-2 text-center text-sm"></div>
                <div id="brunnstrom-details" class="mt-6 p-4 bg-sky-50 rounded-lg text-stone-700 min-h-[100px]"></div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-semibold text-sky-700 mb-4" data-i18n="factorsTitle">Y·∫øu T·ªë ·∫¢nh H∆∞·ªüng ƒê·∫øn Ph·ª•c H·ªìi</h3>
                     <p class="mb-4 text-stone-600" data-i18n="factorsDesc">Nhi·ªÅu y·∫øu t·ªë t√°c ƒë·ªông ƒë·∫øn qu√° tr√¨nh ph·ª•c h·ªìi. Vi·ªác can thi·ªáp s·ªõm v√† t√≠ch c·ª±c v√†o c√°c y·∫øu t·ªë c√≥ th·ªÉ thay ƒë·ªïi s·∫Ω c·∫£i thi·ªán ƒë√°ng k·ªÉ ti√™n l∆∞·ª£ng cho b·ªánh nh√¢n.</p>
                    <div class="chart-container">
                        <canvas id="factorsChart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-semibold text-sky-700 mb-4" data-i18n="conditionsTitle">C√°c V·∫•n ƒê·ªÅ Ph·ªï Bi·∫øn Sau ƒê·ªôt Qu·ªµ</h3>
                    <p class="mb-4 text-stone-600" data-i18n="conditionsDesc">B·ªánh nh√¢n th∆∞·ªùng ƒë·ªëi m·∫∑t v·ªõi nhi·ªÅu th√°ch th·ª©c v·ªÅ th·ªÉ ch·∫•t v√† t√¢m l√Ω. Nh·∫≠n bi·∫øt s·ªõm c√°c v·∫•n ƒë·ªÅ n√†y l√† b∆∞·ªõc ƒë·∫ßu ti√™n ƒë·ªÉ c√≥ bi·ªán ph√°p can thi·ªáp ph√π h·ª£p.</p>
                    <div class="chart-container">
                        <canvas id="conditionsChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="van-dong" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-stone-800 mb-4" data-i18n="motorRehabTitle">Ph·ª•c H·ªìi Ch·ª©c NƒÉng V·∫≠n ƒê·ªông</h2>
                <p class="max-w-3xl mx-auto text-lg text-stone-600" data-i18n="motorRehabDesc">V·∫≠t l√Ω tr·ªã li·ªáu s·ªõm v√† li√™n t·ª•c l√† ch√¨a kh√≥a ƒë·ªÉ l·∫•y l·∫°i kh·∫£ nƒÉng v·∫≠n ƒë·ªông, ngƒÉn ng·ª´a bi·∫øn ch·ª©ng v√† gi√∫p b·ªánh nh√¢n t·ª´ng b∆∞·ªõc ƒë·ªôc l·∫≠p. M·ª•c ti√™u l√† ti·∫øn tri·ªÉn t·ª´ c√°c b√†i t·∫≠p th·ª• ƒë·ªông sang ch·ªß ƒë·ªông, t·ª´ n·∫±m tr√™n gi∆∞·ªùng ƒë·∫øn di chuy·ªÉn.</p>
            </div>
            
            <div id="motor-exercises"></div>
        </section>

        <section id="giao-tiep" class="content-section">
             <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-stone-800 mb-4" data-i18n="commImproveTitle">C·∫£i Thi·ªán Kh·∫£ NƒÉng Giao Ti·∫øp</h2>
                <p class="max-w-3xl mx-auto text-lg text-stone-600" data-i18n="commImproveDesc">Giao ti·∫øp l√† c·∫ßu n·ªëi v·ªõi th·∫ø gi·ªõi. Khi l·ªùi n√≥i g·∫∑p kh√≥ khƒÉn, c√°c li·ªáu ph√°p ng√¥n ng·ªØ v√† c√¥ng ngh·ªá h·ªó tr·ª£ s·∫Ω m·ªü ra nh·ªØng c√°nh c·ª≠a m·ªõi, gi√∫p b·ªánh nh√¢n b√†y t·ªè suy nghƒ©, c·∫£m x√∫c v√† gi·∫£m c·∫£m gi√°c b·ªã c√¥ l·∫≠p.</p>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h3 class="text-2xl font-semibold text-sky-700 mb-4" data-i18n="langDisorderTitle">C√°c D·∫°ng R·ªëi Lo·∫°n Ng√¥n Ng·ªØ Ph·ªï Bi·∫øn</h3>
                <p class="mb-4 text-stone-600" data-i18n="langDisorderDesc">T√πy v√†o v√πng n√£o b·ªã t·ªïn th∆∞∆°ng, b·ªánh nh√¢n c√≥ th·ªÉ g·∫∑p c√°c d·∫°ng r·ªëi lo·∫°n ng√¥n ng·ªØ kh√°c nhau. Nh·∫•p ƒë·ªÉ t√¨m hi·ªÉu ƒë·∫∑c ƒëi·ªÉm c·ªßa t·ª´ng lo·∫°i.</p>
                <div id="aphasia-tabs" class="flex flex-wrap gap-2 mb-4"></div>
                <div id="aphasia-content" class="p-4 bg-sky-50 rounded-lg text-stone-700"></div>
            </div>
            
            <div id="communication-strategies"></div>
        </section>

        <section id="tu-duy" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-stone-800 mb-4" data-i18n="cognitionSpiritTitle">Nu√¥i D∆∞·ª°ng T∆∞ Duy & Tinh Th·∫ßn</h2>
                <p class="max-w-3xl mx-auto text-lg text-stone-600" data-i18n="cognitionSpiritDesc">V∆∞·ª£t qua tr·∫°ng th√°i "b·ªã ƒë·ªông" v√† "b·∫•t l·ª±c h·ªçc ƒë∆∞·ª£c" l√† m·ªôt cu·ªôc chi·∫øn quan tr·ªçng. C√°c b√†i t·∫≠p nh·∫≠n th·ª©c v√† h·ªó tr·ª£ c·∫£m x√∫c gi√∫p b·ªánh nh√¢n t√°i k√≠ch ho·∫°t t∆∞ duy, t√¨m l·∫°i ni·ªÅm vui v√† ch·ªß ƒë·ªông tham gia v√†o cu·ªôc s·ªëng.</p>
            </div>
            
            <div class="bg-amber-100 border-l-4 border-amber-500 text-amber-800 p-4 rounded-r-lg mb-8" role="alert">
                <p class="font-bold" data-i18n="learnedHelplessnessTitle">Ch·ªëng l·∫°i "B·∫•t L·ª±c H·ªçc ƒê∆∞·ª£c"</p>
                <p data-i18n="learnedHelplessnessDesc">ƒê√¢y l√† tr·∫°ng th√°i t√¢m l√Ω khi·∫øn b·ªánh nh√¢n tin r·∫±ng h·ªç kh√¥ng th·ªÉ ki·ªÉm so√°t ho√†n c·∫£nh, d·∫´n ƒë·∫øn b·ªã ƒë·ªông. B·∫±ng c√°ch khuy·∫øn kh√≠ch c√°c l·ª±a ch·ªçn nh·ªè, cho ph√©p t·ª± l√†m v√† khen ng·ª£i n·ªó l·ª±c, ch√∫ng ta c√≥ th·ªÉ ph√° v·ª° v√≤ng lu·∫©n qu·∫©n n√†y v√† trao quy·ªÅn cho b·ªánh nh√¢n.</p>
            </div>

            <div id="cognitive-emotional-content"></div>
        </section>

        <section id="cham-soc" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-stone-800 mb-4" data-i18n="dailyCareTitle">ChƒÉm S√≥c To√†n Di·ªán H√†ng Ng√†y</h2>
                <p class="max-w-3xl mx-auto text-lg text-stone-600" data-i18n="dailyCareDesc">ChƒÉm s√≥c h√†ng ng√†y l√† n·ªÅn t·∫£ng v·ªØng ch·∫Øc cho qu√° tr√¨nh ph·ª•c h·ªìi. Vi·ªác ch√∫ √Ω ƒë·∫øn dinh d∆∞·ª°ng, v·ªá sinh, v√† ph√≤ng ng·ª´a bi·∫øn ch·ª©ng kh√¥ng ch·ªâ duy tr√¨ s·ª©c kh·ªèe th·ªÉ ch·∫•t m√† c√≤n th·ªÉ hi·ªán s·ª± quan t√¢m, t√¥n tr·ªçng ph·∫©m gi√° c·ªßa ng∆∞·ªùi b·ªánh.</p>
            </div>

            <div id="daily-care-content"></div>
        </section>

    </main>
    
    <footer class="bg-stone-800 text-stone-300 py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p data-i18n="disclaimer1">Th√¥ng tin trong ·ª©ng d·ª•ng n√†y mang t√≠nh tham kh·∫£o, kh√¥ng thay th·∫ø cho ch·∫©n ƒëo√°n v√† ch·ªâ ƒë·ªãnh c·ªßa chuy√™n gia y t·∫ø.</p>
            <p class="text-sm mt-2" data-i18n="disclaimer2">Lu√¥n tham v·∫•n b√°c sƒ© v√† c√°c nh√† tr·ªã li·ªáu ƒë·ªÉ c√≥ k·∫ø ho·∫°ch chƒÉm s√≥c ph√π h·ª£p nh·∫•t.</p>
            <p class="text-sm mt-2" data-i18n="copyright">Copyright ¬© 2025 Nh·∫≠t Phan. All rights reserved.</p>
        </div>
    </footer>


<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // Moved appData declaration to the top to ensure it's defined before any functions use it.
    const appData = {
        brunnstrom: [
            { stage: 1, name: { vi: "M·ªÅm nh≈©n", en: "Flaccidity" }, desc: { vi: "Kh√¥ng c√≥ c·ª≠ ƒë·ªông ch·ªß ƒë·ªông. C∆° b·∫Øp y·∫øu, m·ªÅm. Giai ƒëo·∫°n n√†y c·∫ßn t·∫≠p v·∫≠n ƒë·ªông th·ª• ƒë·ªông ƒë·ªÉ duy tr√¨ t·∫ßm v·∫≠n ƒë·ªông kh·ªõp v√† ngƒÉn ng·ª´a co r√∫t.", en: "No active movement. Muscles are weak and flaccid. This stage requires passive range of motion exercises to maintain joint mobility and prevent contractures." } },
            { stage: 2, name: { vi: "Co c·ª©ng xu·∫•t hi·ªán", en: "Spasticity appears" }, desc: { vi: "Co c·ª©ng b·∫Øt ƒë·∫ßu xu·∫•t hi·ªán, c√≥ th·ªÉ c√≥ co th·∫Øt c∆° kh√¥ng t·ª± ch·ªß. ƒê√¢y l√† d·∫•u hi·ªáu n√£o ƒëang t√°i t·∫°o k·∫øt n·ªëi. Ti·∫øp t·ª•c v·∫≠n ƒë·ªông th·ª• ƒë·ªông v√† b·∫Øt ƒë·∫ßu c√°c b√†i t·∫≠p ch·ªß ƒë·ªông c√≥ tr·ª£ gi√∫p.", en: "Spasticity begins to appear, possibly with involuntary muscle spasms. This indicates the brain is re-establishing connections. Continue passive range of motion and begin assisted active exercises." } },
            { stage: 3, name: { vi: "Co c·ª©ng tƒÉng", en: "Increased spasticity" }, desc: { vi: "Co c·ª©ng ƒë·∫°t ƒë·ªânh ƒëi·ªÉm. C√°c c·ª≠ ƒë·ªông ch·ªß ƒë·ªông c√≥ th·ªÉ xu·∫•t hi·ªán nh∆∞ng th∆∞·ªùng l√† c·ª≠ ƒë·ªông li√™n k·∫øt. C·∫ßn t·∫≠p trung v√†o vi·ªác ki·ªÉm so√°t c√°c c·ª≠ ƒë·ªông n√†y.", en: "Spasticity reaches its peak. Active movements may occur but are often synergistic movements. Focus on controlling these movements." } },
            { stage: 4, name: { vi: "Co c·ª©ng gi·∫£m", en: "Decreased spasticity" }, desc: { vi: "Co c·ª©ng b·∫Øt ƒë·∫ßu gi·∫£m. B·ªánh nh√¢n c√≥ th·ªÉ th·ª±c hi·ªán m·ªôt s·ªë c·ª≠ ƒë·ªông ƒë·ªôc l·∫≠p, kh√¥ng c√≤n b·ªã r√†ng bu·ªôc ho√†n to√†n. TƒÉng c∆∞·ªùng c√°c b√†i t·∫≠p ch·ªß ƒë·ªông.", en: "Spasticity begins to decrease. Patients can perform some independent movements, no longer completely bound. Intensify active exercises." } },
            { stage: 5, name: { vi: "K·∫øt h·ª£p ph·ª©c t·∫°p", en: "Complex movement combinations" }, desc: { vi: "Co c·ª©ng ti·∫øp t·ª•c gi·∫£m. B·ªánh nh√¢n c√≥ th·ªÉ th·ª±c hi·ªán c√°c chuy·ªÉn ƒë·ªông ph·ª©c t·∫°p h∆°n, ph·ªëi h·ª£p t·ªët h∆°n. T·∫≠p trung v√†o c√°c b√†i t·∫≠p ch·ª©c nƒÉng.", en: "Spasticity continues to decrease. Patients can perform more complex, better coordinated movements. Focus on functional exercises." } },
            { stage: 6, name: { vi: "B√¨nh th∆∞·ªùng", en: "Normal" }, desc: { vi: "Co c·ª©ng kh√¥ng c√≤n. C√°c c·ª≠ ƒë·ªông g·∫ßn nh∆∞ b√¨nh th∆∞·ªùng v·ªÅ ph·ªëi h·ª£p v√† s·ª©c m·∫°nh. Ti·∫øp t·ª•c r√®n luy·ªán ƒë·ªÉ ho√†n thi·ªán.", en: "Spasticity is absent. Movements are almost normal in coordination and strength. Continue training for full recovery." } },
            { stage: 7, name: { vi: "Ho√†n to√†n b√¨nh th∆∞·ªùng", en: "Completely normal" }, desc: { vi: "Ch·ª©c nƒÉng v·∫≠n ƒë·ªông tr·ªü l·∫°i ho√†n to√†n b√¨nh th∆∞·ªùng. Duy tr√¨ l·ªëi s·ªëng nƒÉng ƒë·ªông ƒë·ªÉ ph√≤ng ng·ª´a t√°i ph√°t.", en: "Motor function returns completely to normal. Maintain an active lifestyle to prevent recurrence." } }
        ],
        motorExercises: [
            { 
                category: { vi: "B√†i T·∫≠p T·∫°i Gi∆∞·ªùng (Th·ª• ƒë·ªông & Ch·ªß ƒë·ªông)", en: "Bed Exercises (Passive & Active)" },
                icon: "üõå",
                items: [
                    { name: { vi: "V·∫≠n ƒë·ªông th·ª• ƒë·ªông c√°c kh·ªõp", en: "Passive range of motion exercises for joints" }, desc: { vi: "Ng∆∞·ªùi chƒÉm s√≥c nh·∫π nh√†ng di chuy·ªÉn c√°c kh·ªõp vai, khu·ª∑u, c·ªï tay, ng√≥n tay, h√°ng, g·ªëi, c·ªï ch√¢n c·ªßa b√™n li·ªát ƒë·ªÉ duy tr√¨ s·ª± linh ho·∫°t.", en: "Caregivers gently move the shoulder, elbow, wrist, finger, hip, knee, and ankle joints of the affected side to maintain flexibility." } },
                    { name: { vi: "T·∫≠p lƒÉn nghi√™ng", en: "Side rolling exercises" }, desc: { vi: "D√πng tay v√† ch√¢n l√†nh ƒë·ªÉ h·ªó tr·ª£ lƒÉn ng∆∞·ªùi sang b√™n li·ªát v√† b√™n l√†nh. Gi√∫p thay ƒë·ªïi t∆∞ th·∫ø v√† gi·∫£m √°p l·ª±c.", en: "Use the unaffected arm and leg to assist rolling the body to the affected and unaffected sides. Helps change posture and reduce pressure." } },
                    { name: { vi: "T·∫≠p l√†m c·∫ßu n·ªëi (B·∫Øc c·∫ßu)", en: "Bridging exercise" }, desc: { vi: "N·∫±m ng·ª≠a, co hai g·ªëi, ƒë·∫∑t hai b√†n ch√¢n l√™n gi∆∞·ªùng. N√¢ng h√¥ng l√™n kh·ªèi gi∆∞·ªùng. Gi√∫p tƒÉng c∆∞·ªùng s·ª©c m·∫°nh c∆° m√¥ng v√† l∆∞ng.", en: "Lie on your back, bend both knees, place both feet on the bed. Lift the hips off the bed. Helps strengthen gluteal and back muscles." } },
                    { name: { vi: "T·∫≠p ng·ªìi d·∫≠y", en: "Sitting up exercise" }, desc: { vi: "T·ª´ t∆∞ th·∫ø n·∫±m, d√πng tay l√†nh v·ªãn v√†o th√†nh gi∆∞·ªùng ho·∫∑c m·ªôt s·ª£i d√¢y ƒë·ªÉ k√©o ng∆∞·ªùi ng·ªìi d·∫≠y. Chu·∫©n b·ªã cho vi·ªác ra kh·ªèi gi∆∞·ªùng.", en: "From a lying position, use the unaffected arm to grasp the bed rail or a rope to pull oneself up to a sitting position. Prepares for getting out of bed." } }
                ]
            },
            {
                category: { vi: "Thi·∫øt B·ªã H·ªó Tr·ª£ V·∫≠n ƒê·ªông", en: "Motor Rehabilitation Equipment" },
                icon: "ü§ñ",
                items: [
                    { name: { vi: "N·∫πp ch·ªânh h√¨nh", en: "Orthoses" }, desc: { vi: "Gi·ªØ kh·ªõp ·ªü t∆∞ th·∫ø ƒë√∫ng, ngƒÉn ng·ª´a co r√∫t (n·∫πp c·ªï ch√¢n, b√†n tay). H·ªó tr·ª£ khi t·∫≠p ƒë·ª©ng v√† ƒëi.", en: "Keeps joints in proper alignment, prevents contractures (ankle-foot orthosis, hand splint). Assists with standing and walking exercises." } },
                    { name: { vi: "Robot ph·ª•c h·ªìi ch·ª©c nƒÉng", en: "Rehabilitation Robots" }, desc: { vi: "C√°c thi·∫øt b·ªã nh∆∞ Anymov, Reogo h·ªó tr·ª£ c√°c b√†i t·∫≠p l·∫∑p ƒëi l·∫∑p l·∫°i, chuy√™n s√¢u ngay c·∫£ khi b·ªánh nh√¢n c√≤n y·∫øu, th√∫c ƒë·∫©y t√≠nh m·ªÅm d·∫ªo th·∫ßn kinh.", en: "Devices like Anymov, Reogo support repetitive, intensive exercises even when the patient is weak, promoting neuroplasticity." } },
                    { name: { vi: "Gi∆∞·ªùng y t·∫ø ƒëa nƒÉng", en: "Multi-functional Medical Bed" }, desc: { vi: "H·ªó tr·ª£ n√¢ng ƒë·∫ßu, ch√¢n, thay ƒë·ªïi t∆∞ th·∫ø d·ªÖ d√†ng, c√≥ thanh ch·∫Øn an to√†n v√† c√≥ th·ªÉ k·∫øt h·ª£p ƒë·ªám ch·ªëng lo√©t.", en: "Supports head and leg elevation, easy posture changes, has safety rails, and can be combined with anti-decubitus mattresses." } },
                    { name: { vi: "K√≠ch th√≠ch ƒëi·ªán ch·ª©c nƒÉng (FES)", en: "Functional Electrical Stimulation (FES)" }, desc: { vi: "D√πng d√≤ng ƒëi·ªán nh·∫π ƒë·ªÉ k√≠ch th√≠ch c√°c c∆° b·ªã y·∫øu, gi√∫p t√°i r√®n luy·ªán v·∫≠n ƒë·ªông.", en: "Uses mild electrical current to stimulate weakened muscles, aiding motor re-education." } }
                ]
            }
        ],
        aphasiaTypes: [
            { 
                id: "broca",
                name: { vi: "M·∫•t ng√¥n ng·ªØ Broca (V·∫≠n ƒë·ªông)", en: "Broca's Aphasia (Expressive)" }, 
                desc: { vi: "B·ªánh nh√¢n hi·ªÉu l·ªùi n√≥i nh∆∞ng g·∫∑p kh√≥ khƒÉn khi di·ªÖn ƒë·∫°t. L·ªùi n√≥i ng·∫Øt qu√£ng, ch·ªâ n√≥i ƒë∆∞·ª£c t·ª´ ƒë∆°n ho·∫∑c c√¢u ng·∫Øn. Th∆∞·ªùng nh·∫≠n th·ª©c ƒë∆∞·ª£c kh√≥ khƒÉn c·ªßa m√¨nh v√† c·∫£m th·∫•y th·∫•t v·ªçng.", en: "Patients understand speech but have difficulty expressing themselves. Speech is hesitant, with single words or short sentences. They are usually aware of their difficulties and feel frustrated." } 
            },
            { 
                id: "wernicke",
                name: { vi: "M·∫•t ng√¥n ng·ªØ Wernicke (C·∫£m gi√°c)", en: "Wernicke's Aphasia (Receptive)" }, 
                desc: { vi: "B·ªánh nh√¢n n√≥i l∆∞u lo√°t nh∆∞ng c√¢u n√≥i th∆∞·ªùng v√¥ nghƒ©a, d√πng sai t·ª´. Kh·∫£ nƒÉng nghe hi·ªÉu k√©m. Th∆∞·ªùng kh√¥ng nh·∫≠n ra l·ªói sai trong l·ªùi n√≥i c·ªßa m√¨nh.", en: "Patients speak fluently, but their speech is often meaningless and uses incorrect words. Auditory comprehension is poor. They often do not recognize errors in their own speech." } 
            },
            { 
                id: "global",
                name: { vi: "M·∫•t ng√¥n ng·ªØ To√†n b·ªô", en: "Global Aphasia" }, 
                desc: { vi: "D·∫°ng n·∫∑ng nh·∫•t, ·∫£nh h∆∞·ªüng nghi√™m tr·ªçng ƒë·∫øn c·∫£ kh·∫£ nƒÉng di·ªÖn ƒë·∫°t v√† th√¥ng hi·ªÉu. B·ªánh nh√¢n g·∫ßn nh∆∞ kh√¥ng th·ªÉ n√≥i v√† kh√¥ng hi·ªÉu l·ªùi n√≥i.", en: "The most severe form, significantly affecting both expressive and receptive language. Patients are almost unable to speak or understand speech." } 
            },
            { 
                id: "dysarthria",
                name: { vi: "R·ªëi lo·∫°n v·∫≠n ng√¥n (N√≥i kh√≥)", en: "Dysarthria (Speech Difficulty)" }, 
                desc: { vi: "Kh√¥ng ph·∫£i v·∫•n ƒë·ªÅ v·ªÅ ng√¥n ng·ªØ m√† l√† do y·∫øu/li·ªát c√°c c∆° ph√°t √¢m (l∆∞·ª°i, m√¥i, h√†m). L·ªùi n√≥i b·ªã m√©o, ng·ªçng, n√≥i ch·∫≠m, kh√≥ nghe.", en: "Not a language problem, but due to weakness/paralysis of the speech muscles (tongue, lips, jaw). Speech is distorted, slurred, slow, and difficult to understand." } 
            }
        ],
        communicationStrategies: [
             {
                category: { vi: "Li·ªáu Ph√°p Ng√¥n Ng·ªØ & L·ªùi N√≥i", en: "Speech & Language Therapy" },
                icon: "üí¨",
                items: [
                    { name: { vi: "B√†i t·∫≠p l·∫∑p t·ª´ v√† g·ªçi t√™n", en: "Word Repetition and Naming Exercises" }, desc: { vi: "S·ª≠ d·ª•ng th·∫ª h√¨nh c√°c v·∫≠t d·ª•ng quen thu·ªôc (ly n∆∞·ªõc, ƒëi·ªán tho·∫°i, s√°ch) ho·∫∑c ·ª©ng d·ª•ng tr√™n m√°y t√≠nh b·∫£ng. Y√™u c·∫ßu b·ªánh nh√¢n g·ªçi t√™n v·∫≠t ƒë√≥. N·∫øu kh√≥, b·∫°n c√≥ th·ªÉ n√≥i tr∆∞·ªõc v√† y√™u c·∫ßu b·ªánh nh√¢n l·∫∑p l·∫°i. V√≠ d·ª•: 'ƒê√¢y l√† c√°i g√¨?', '√îng/B√† n√≥i: C√ÅI B√ÄN'.", en: "Use picture cards of familiar items (water glass, phone, book) or tablet apps. Ask the patient to name the item. If difficult, you can say it first and ask the patient to repeat. Example: 'What is this?', 'Say: TABLE'." } },
                    { name: { vi: "Luy·ªán ph√°t √¢m v√† l√†m ·∫•m c∆° mi·ªáng", en: "Articulation and Oral Motor Warm-up" }, desc: { vi: "Th·ª±c hi·ªán c√°c b√†i t·∫≠p ƒë∆°n gi·∫£n nh∆∞ chu m√¥i, m√≠m m√¥i, th·ªïi m√°, th√® l∆∞·ª°i ra v√†o, di chuy·ªÉn l∆∞·ª°i sang hai b√™n. Sau ƒë√≥, t·∫≠p ph√°t √¢m c√°c nguy√™n √¢m (a, o, u, i, e) v√† c√°c ph·ª• √¢m ƒë∆°n gi·∫£n (ba, ma, ca).", en: "Perform simple exercises like puckering lips, pressing lips together, blowing cheeks, sticking tongue in and out, moving tongue side to side. Then, practice pronouncing vowels (a, o, u, i, e) and simple consonants (ba, ma, ca)." } },
                    { name: { vi: "H√¨nh th√†nh c√¢u v√† h·ªôi tho·∫°i c√≥ c·∫•u tr√∫c", en: "Sentence Formation and Structured Conversation" }, desc: { vi: "B·∫Øt ƒë·∫ßu b·∫±ng c√°c c√¢u h·ªèi 'C√≥/Kh√¥ng' ('√îng/B√† c√≥ ƒëau kh√¥ng?', '√îng/B√† c√≥ mu·ªën u·ªëng n∆∞·ªõc kh√¥ng?'). Sau ƒë√≥ tƒÉng d·∫ßn ƒë·ªô ph·ª©c t·∫°p b·∫±ng c√°ch y√™u c·∫ßu b·ªánh nh√¢n n√≥i 1-2 t·ª´ ƒë·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi m·ªü ('√îng/B√† mu·ªën ƒÉn g√¨?', 'N∆∞·ªõc cam').", en: "Start with 'Yes/No' questions ('Are you in pain?', 'Do you want water?'). Then gradually increase complexity by asking the patient to say 1-2 words to answer open-ended questions ('What do you want to eat?', 'Orange juice')." } },
                    { name: { vi: "Tr√≤ ch∆°i t·ª´ ng·ªØ & h√°t", en: "Word Games & Singing" }, desc: { vi: "Ch∆°i c√°c tr√≤ ƒë∆°n gi·∫£n nh∆∞ 'T√¨m t·ª´ tr√°i nghƒ©a' (n√≥ng - l·∫°nh, to - nh·ªè) ho·∫∑c 'M√¥ t·∫£ ƒë·ªì v·∫≠t' (v√≠ d·ª•: 'Con v·∫≠t c√≥ l√¥ng, k√™u meo meo l√† con g√¨?'). H√°t c√°c b√†i h√°t quen thu·ªôc, ƒë·∫∑c bi·ªát l√† nh·ªØng b√†i c·ª• √¥ng/b√† y√™u th√≠ch, ƒë·ªÉ k√≠ch th√≠ch kh·∫£ nƒÉng n√≥i theo giai ƒëi·ªáu.", en: "Play simple games like 'Find the opposite word' (hot - cold, big - small) or 'Describe an object' (e.g., 'What animal has fur and meows?'). Sing familiar songs, especially the patient's favorites, to stimulate speech through melody." } },
                    { name: { vi: "ƒê·ªçc to (v·ªõi tr·ª£ gi√∫p)", en: "Reading Aloud (with assistance)" }, desc: { vi: "C√πng b·ªánh nh√¢n ƒë·ªçc to c√°c ƒëo·∫°n vƒÉn ng·∫Øn, ti√™u ƒë·ªÅ b√°o, truy·ªán thi·∫øu nhi. B·∫°n c√≥ th·ªÉ ƒë·ªçc tr∆∞·ªõc v√† b·ªánh nh√¢n ƒë·ªçc theo, ho·∫∑c ƒë·ªçc t·ª´ng c√¢u v√† b·ªánh nh√¢n ƒë·ªçc l·∫°i. Vi·ªác n√†y gi√∫p c·∫£i thi·ªán s·ª± l∆∞u lo√°t v√† t·ª± tin.", en: "Read short passages, newspaper headlines, or children's stories aloud with the patient. You can read first and the patient follows, or read sentence by sentence and the patient repeats. This helps improve fluency and confidence." } }
                ]
            },
            {
                category: { vi: "Giao Ti·∫øp Thay Th·∫ø & TƒÉng C∆∞·ªùng (AAC)", en: "Augmentative and Alternative Communication (AAC)" },
                icon: "üì±",
                items: [
                    { name: { vi: "C√¥ng c·ª• Low-tech (Kh√¥ng c√¥ng ngh·ªá)", en: "Low-tech Tools" }, desc: { vi: "S·ª≠ d·ª•ng c·ª≠ ch·ªâ ƒë∆°n gi·∫£n (g·∫≠t ƒë·∫ßu, l·∫Øc ƒë·∫ßu), n√©t m·∫∑t. Chu·∫©n b·ªã b·∫£ng ch·ªØ c√°i l·ªõn ho·∫∑c b·∫£ng h√¨nh ·∫£nh c√°c nhu c·∫ßu c∆° b·∫£n (ƒë√≥i, kh√°t, ƒëi v·ªá sinh, ƒëau) ƒë·ªÉ b·ªánh nh√¢n ch·ªâ v√†o. Ho·∫∑c d√πng gi·∫•y b√∫t ƒë·ªÉ b·ªánh nh√¢n v·∫Ω/vi·∫øt n·∫øu c√≥ th·ªÉ.", en: "Use simple gestures (nodding, shaking head), facial expressions. Prepare large alphabet boards or picture boards for basic needs (hungry, thirsty, toilet, pain) for the patient to point to. Or use paper and pen for the patient to draw/write if possible." } },
                    { name: { vi: "·ª®ng d·ª•ng di ƒë·ªông & m√°y t√≠nh b·∫£ng", en: "Mobile & Tablet Applications" }, desc: { vi: "C√†i ƒë·∫∑t c√°c ·ª©ng d·ª•ng giao ti·∫øp chuy√™n d·ª•ng (v√≠ d·ª•: Proloquo2Go, TouchChat, ho·∫∑c c√°c ·ª©ng d·ª•ng ti·∫øng Vi·ªát t∆∞∆°ng t·ª± n·∫øu c√≥) cho ph√©p b·ªánh nh√¢n ch·ªçn bi·ªÉu t∆∞·ª£ng ho·∫∑c g√µ ch·ªØ ƒë·ªÉ m√°y ph√°t ra l·ªùi n√≥i. Khuy·∫øn kh√≠ch b·ªánh nh√¢n s·ª≠ d·ª•ng h√†ng ng√†y ƒë·ªÉ y√™u c·∫ßu ƒë·ªì ƒÉn, n∆∞·ªõc u·ªëng, ho·∫∑c b√†y t·ªè c·∫£m x√∫c.", en: "Install specialized communication apps (e.g., Proloquo2Go, TouchChat, or similar Vietnamese apps if available) that allow patients to select symbols or type text for the device to speak aloud. Encourage daily use for requesting food, drink, or expressing emotions." } },
                    { name: { vi: "Thi·∫øt b·ªã ƒëi·ªÅu khi·ªÉn b·∫±ng m·∫Øt (Eye-tracking devices)", en: "Eye-tracking Devices" }, desc: { vi: "ƒê·ªëi v·ªõi b·ªánh nh√¢n li·ªát n·∫∑ng, kh√¥ng th·ªÉ d√πng tay ho·∫∑c n√≥i. Thi·∫øt b·ªã n√†y cho ph√©p b·ªánh nh√¢n ƒëi·ªÅu khi·ªÉn con tr·ªè tr√™n m√†n h√¨nh b·∫±ng √°nh m·∫Øt, ch·ªçn ch·ªØ, bi·ªÉu t∆∞·ª£ng, ho·∫∑c l∆∞·ªõt web, g·ª≠i email. ƒê√¢y l√† c√¥ng c·ª• m·∫°nh m·∫Ω gi√∫p b·ªánh nh√¢n giao ti·∫øp ch·ªß ƒë·ªông v√† k·∫øt n·ªëi l·∫°i v·ªõi th·∫ø gi·ªõi.", en: "For severely paralyzed patients who cannot use their hands or speak. These devices allow patients to control a cursor on screen with their eyes, select letters, symbols, or browse the web, send emails. This is a powerful tool to help patients communicate actively and reconnect with the world." } }
                ]
            }
        ],
        cognitiveEmotional: [
            {
                category: { vi: "B√†i T·∫≠p Nh·∫≠n Th·ª©c (R√®n Luy·ªán T∆∞ Duy)", en: "Cognitive Exercises (Mind Training)" },
                icon: "üß†",
                items: [
                    { name: { vi: "Tr√≤ ch∆°i tr√≠ nh·ªõ: G·ª£i nh·ªõ s·ª± ki·ªán & V·∫≠t d·ª•ng", en: "Memory Games: Recalling Events & Objects" }, desc: { vi: "Y√™u c·∫ßu c·ª• √¥ng k·ªÉ v·ªÅ c√°c s·ª± ki·ªán quan tr·ªçng trong qu√° kh·ª© (v√≠ d·ª•: ng√†y c∆∞·ªõi, sinh nh·∫≠t con c√°i), ho·∫∑c nh·ªõ v·ªã tr√≠ c√°c v·∫≠t d·ª•ng quen thu·ªôc trong ph√≤ng (v√≠ d·ª•: c√°i k√≠nh, ƒëi·ªÅu khi·ªÉn TV). C√≥ th·ªÉ s·ª≠ d·ª•ng ·∫£nh gia ƒë√¨nh c≈© ƒë·ªÉ g·ª£i m·ªü.", en: "Ask the patient to recall important past events (e.g., wedding day, children's birthdays), or remember the location of familiar objects in the room (e.g., glasses, TV remote). Old family photos can be used as prompts." } },
                    { name: { vi: "Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ: L·ª±a ch·ªçn ƒë∆°n gi·∫£n", en: "Problem Solving: Simple Choices" }, desc: { vi: "ƒê∆∞a ra c√°c l·ª±a ch·ªçn nh·ªè h√†ng ng√†y ƒë·ªÉ c·ª• √¥ng t·ª± quy·∫øt ƒë·ªãnh (v√≠ d·ª•: '√îng mu·ªën m·∫∑c √°o m√†u xanh hay m√†u ghi?', '√îng mu·ªën ƒÉn ch√°o hay s√∫p?'). B·∫Øt ƒë·∫ßu v·ªõi 2-3 l·ª±a ch·ªçn v√† tƒÉng d·∫ßn khi c·ª• √¥ng quen.", en: "Offer small daily choices for the patient to decide (e.g., 'Do you want to wear the blue shirt or the gray one?', 'Do you want porridge or soup?'). Start with 2-3 options and gradually increase as the patient becomes accustomed." } },
                    { name: { vi: "B√†i t·∫≠p ch√∫ √Ω & t·∫≠p trung: T√¨m ki·∫øm & Nghe", en: "Attention & Focus Exercises: Searching & Listening" }, desc: { vi: "Y√™u c·∫ßu c·ª• √¥ng t√¨m m·ªôt v·∫≠t c·ª• th·ªÉ trong t·∫ßm nh√¨n (v√≠ d·ª•: 'Con chu·ªôt b√¥ng c·ªßa √¥ng ƒë√¢u?'). Ho·∫∑c b·∫≠t m·ªôt b·∫£n nh·∫°c c·ª• v√† h·ªèi 'ƒê√¢y l√† nh·∫°c c·ª• g√¨?', '√îng c√≥ th√≠ch kh√¥ng?'", en: "Ask the patient to find a specific object within sight (e.g., 'Where is your teddy bear?'). Or play an instrumental piece and ask 'What instrument is this?', 'Do you like it?'" } },
                    { name: { vi: "T√≠ch h·ª£p v√†o sinh ho·∫°t: Tham gia quy·∫øt ƒë·ªãnh", en: "Integration into Daily Life: Participatory Decisions" }, desc: { vi: "H·ªèi √Ω ki·∫øn c·ª• √¥ng v·ªÅ c√°c ho·∫°t ƒë·ªông trong ng√†y (v√≠ d·ª•: 'Chi·ªÅu nay √¥ng mu·ªën nghe ƒë√†i hay xem TV?'), ho·∫∑c v·ªÅ c√°c m√≥n ƒÉn s·∫Øp t·ªõi. D√π ch·ªâ l√† m·ªôt c√°i g·∫≠t ƒë·∫ßu hay ra d·∫•u hi·ªáu c≈©ng l√† m·ªôt s·ª± s·ª± tham gia t√≠ch c·ª±c.", en: "Ask the patient's opinion on daily activities (e.g., 'Do you want to listen to the radio or watch TV this afternoon?'), or upcoming meals. Even a nod or a gesture is active participation." } },
                    { name: { vi: "Tr√≤ ch∆°i logic nh·∫π nh√†ng: X·∫øp h√¨nh ƒë∆°n gi·∫£n", en: "Gentle Logic Games: Simple Puzzles" }, desc: { vi: "S·ª≠ d·ª•ng c√°c b·ªô gh√©p h√¨nh (puzzle) c√≥ √≠t m·∫£nh (5-10 m·∫£nh) v√† h√¨nh ·∫£nh r√µ r√†ng, quen thu·ªôc. Ho·∫∑c c√°c kh·ªëi g·ªó ƒë∆°n gi·∫£n ƒë·ªÉ c·ª• √¥ng t·ª± x·∫øp theo √Ω m√¨nh ho·∫∑c theo m·∫´u.", en: "Use puzzles with few pieces (5-10 pieces) and clear, familiar images. Or simple wooden blocks for the patient to arrange as desired or according to a pattern." } },
                    { name: { vi: "K·ªÉ chuy·ªán: Nghe v√† k·ªÉ l·∫°i", en: "Storytelling: Listen and Retell" }, desc: { vi: "Ng∆∞·ªùi chƒÉm s√≥c ƒë·ªçc ho·∫∑c k·ªÉ m·ªôt c√¢u chuy·ªán ng·∫Øn, sau ƒë√≥ h·ªèi c·ª• √¥ng t√≥m t·∫Øt ho·∫∑c k·ªÉ l·∫°i c√°c chi ti·∫øt ch√≠nh. C√≥ th·ªÉ s·ª≠ d·ª•ng s√°ch thi·∫øu nhi v·ªõi h√¨nh ·∫£nh minh h·ªça r√µ r√†ng ƒë·ªÉ h·ªó tr·ª£.", en: "The caregiver reads or tells a short story, then asks the patient to summarize or retell key details. Children's books with clear illustrations can be used to assist." } }
                ]
            },
            {
                category: { vi: "H·ªó Tr·ª£ Tinh Th·∫ßn & C·∫£m X√∫c", en: "Emotional & Mental Support" },
                icon: "‚ù§Ô∏è",
                items: [
                    { name: { vi: "Nh·∫≠n bi·∫øt & Bi·ªÉu hi·ªán c·∫£m x√∫c: B·∫£ng c·∫£m x√∫c", en: "Recognizing & Expressing Emotions: Emotion Chart" }, desc: { vi: "S·ª≠ d·ª•ng m·ªôt b·∫£ng c√≥ c√°c bi·ªÉu t∆∞·ª£ng c·∫£m x√∫c (vui, bu·ªìn, t·ª©c gi·∫≠n, s·ª£ h√£i, m·ªát m·ªèi) ƒë·ªÉ c·ª• √¥ng c√≥ th·ªÉ ch·ªâ v√†o, thay v√¨ ph·∫£i n√≥i. ƒêi·ªÅu n√†y gi√∫p c·ª• √¥ng d·ªÖ d√†ng b√†y t·ªè tr·∫°ng th√°i c·ªßa m√¨nh.", en: "Use a chart with emotion icons (happy, sad, angry, scared, tired) for the patient to point to, instead of speaking. This helps the patient express their state more easily." } },
                    { name: { vi: "Li·ªáu ph√°p s√°ng t·∫°o: V·∫Ω ngu·ªách ngo·∫°c & T√¥ m√†u", en: "Creative Therapy: Doodling & Coloring" }, desc: { vi: "Cung c·∫•p gi·∫•y, b√∫t ch√¨ m√†u/s√°p ƒë·ªÉ c·ª• √¥ng t·ª± do v·∫Ω ngu·ªách ngo·∫°c ho·∫∑c t√¥ m√†u c√°c h√¨nh v·∫Ω ƒë∆°n gi·∫£n. ƒê√¢y l√† m·ªôt c√°ch tuy·ªát v·ªùi ƒë·ªÉ gi·∫£i t·ªèa c·∫£m x√∫c v√† k√≠ch th√≠ch t∆∞ duy m√† kh√¥ng c·∫ßn l·ªùi n√≥i.", en: "Provide paper, colored pencils/crayons for the patient to freely doodle or color simple drawings. This is a great way to release emotions and stimulate thinking without needing words." } },
                    { name: { vi: "K·∫øt n·ªëi x√£ h·ªôi: Video call & Chia s·∫ª", en: "Social Connection: Video Calls & Sharing" }, desc: { vi: "Th∆∞·ªùng xuy√™n g·ªçi video cho ng∆∞·ªùi th√¢n, b·∫°n b√® ƒë·ªÉ c·ª• √¥ng c√≥ c∆° h·ªôi t∆∞∆°ng t√°c. Ng∆∞·ªùi chƒÉm s√≥c c√≥ th·ªÉ k·ªÉ cho c·ª• √¥ng nghe nh·ªØng c√¢u chuy·ªán, tin t·ª©c trong gia ƒë√¨nh, h√†ng x√≥m ƒë·ªÉ c·ª• √¥ng kh√¥ng c·∫£m th·∫•y b·ªã b·ªè l·∫°i.", en: "Regularly make video calls to family and friends for the patient to interact. Caregivers can tell the patient stories and news from family and neighbors so the patient doesn't feel left out." } },
                    { name: { vi: "Li·ªáu ph√°p √¢m nh·∫°c: Nh·∫°c tu·ªïi th∆°", en: "Music Therapy: Childhood Music" }, desc: { vi: "B·∫≠t nh·ªØng b·∫£n nh·∫°c c·ª• √¥ng y√™u th√≠ch th·ªùi tr·∫ª. √Çm nh·∫°c c√≥ kh·∫£ nƒÉng m·∫°nh m·∫Ω trong vi·ªác k√≠ch ho·∫°t tr√≠ nh·ªõ, g·ª£i l·∫°i c·∫£m x√∫c t√≠ch c·ª±c v√† gi·∫£m cƒÉng th·∫≥ng.", en: "Play the patient's favorite music from their youth. Music has a powerful ability to trigger memories, evoke positive emotions, and reduce stress." } },
                    { name: { vi: "Massage nh·∫π nh√†ng & Th∆∞ gi√£n", en: "Gentle Massage & Relaxation" }, desc: { vi: "Th·ª±c hi·ªán massage nh·∫π nh√†ng ·ªü tay, ch√¢n, ƒë·∫ßu ho·∫∑c l∆∞ng v·ªõi d·∫ßu th∆°m ƒë·ªÉ gi√∫p c·ª• √¥ng th∆∞ gi√£n, gi·∫£m ƒëau nh·ª©c v√† c·∫£m th·∫•y ƒë∆∞·ª£c v·ªó v·ªÅ, quan t√¢m.", en: "Perform gentle massage on the hands, feet, head, or back with essential oils to help the patient relax, reduce pain, and feel comforted and cared for." } },
                    { name: { vi: "ƒê·ªông vi√™n & Khen ng·ª£i: Ghi nh·∫≠n m·ªçi n·ªó l·ª±c", en: "Encouragement & Praise: Acknowledging Every Effort" }, desc: { vi: "D√π l√† m·ªôt c·ª≠ ƒë·ªông nh·ªè, m·ªôt ti·∫øng n√≥i kh·∫Ω hay m·ªôt s·ª± l·ª±a ch·ªçn ƒë∆°n gi·∫£n, h√£y lu√¥n ghi nh·∫≠n v√† khen ng·ª£i c·ª• √¥ng. ƒêi·ªÅu n√†y c·ªßng c·ªë tinh th·∫ßn, gi√∫p c·ª• √¥ng c·∫£m th·∫•y c√≥ gi√° tr·ªã v√† c√≥ ƒë·ªông l·ª±c ƒë·ªÉ ti·∫øp t·ª•c c·ªë g·∫Øng.", en: "Even a small movement, a soft word, or a simple choice, always acknowledge and praise the patient. This strengthens their spirit, helps them feel valued, and motivates them to continue trying." } }
                ]
            }
        ],
        dailyCare: [
            {
                category: { vi: "Ph√≤ng Ng·ª´a Bi·∫øn Ch·ª©ng", en: "Complication Prevention" },
                icon: "üõ°Ô∏è",
                items: [
                    { name: { vi: "Ch·ªëng lo√©t t√¨ ƒë√®", en: "Preventing Pressure Ulcers" }, desc: { vi: "Quan tr·ªçng nh·∫•t: xoay tr·ªü b·ªánh nh√¢n m·ªói 2 gi·ªù. Gi·ªØ da s·∫°ch v√† kh√¥. S·ª≠ d·ª•ng n·ªám h∆°i ho·∫∑c ƒë·ªám n∆∞·ªõc.", en: "Most importantly: turn the patient every 2 hours. Keep skin clean and dry. Use an air or water mattress." } },
                    { name: { vi: "Ph√≤ng vi√™m ph·ªïi h√≠t", en: "Preventing Aspiration Pneumonia" }, desc: { vi: "Cho ƒÉn ·ªü t∆∞ th·∫ø ng·ªìi th·∫≥ng. Th·ª©c ƒÉn m·ªÅm, s·ªát. V·ªó rung l∆∞ng gi√∫p long ƒë·ªùm. T·∫≠p h√≠t th·ªü s√¢u.", en: "Feed in an upright sitting position. Food should be soft and thickened. Percuss the back to loosen phlegm. Practice deep breathing exercises." } },
                    { name: "Ch·ªëng co r√∫t kh·ªõp", desc: "Th·ª±c hi·ªán c√°c b√†i t·∫≠p v·∫≠n ƒë·ªông th·ª• ƒë·ªông h√†ng ng√†y. S·ª≠ d·ª•ng n·∫πp ƒë·ªÉ gi·ªØ kh·ªõp ·ªü t∆∞ th·∫ø du·ªói khi ngh·ªâ ng∆°i." },
                    { name: { vi: "Ki·ªÉm so√°t ti·ªÉu ti·ªán/ƒë·∫°i ti·ªán", en: "Managing Bladder/Bowel Function" }, desc: { vi: "V·ªá sinh s·∫°ch s·∫Ω sau m·ªói l·∫ßn ƒëi v·ªá sinh. S·ª≠ d·ª•ng t√£ l√≥t ph√π h·ª£p. Ch·∫ø ƒë·ªô ƒÉn gi√†u ch·∫•t x∆° ƒë·ªÉ ch·ªëng t√°o b√≥n.", en: "Clean thoroughly after each bowel movement/urination. Use appropriate diapers/pads. A high-fiber diet to prevent constipation." } }
                ]
            },
            {
                category: { vi: "Dinh D∆∞·ª°ng & V·ªá Sinh", en: "Nutrition & Hygiene" },
                icon: "üçé",
                items: [
                    { name: { vi: "Ch·∫ø ƒë·ªô ƒÉn u·ªëng", en: "Dietary Regimen" }, desc: { vi: "ƒê·ªß ch·∫•t, c√¢n b·∫±ng. ∆Øu ti√™n rau xanh, tr√°i c√¢y, c√°. Th·ª©c ƒÉn n√™n ƒë∆∞·ª£c n·∫•u m·ªÅm, xay nhuy·ªÖn n·∫øu kh√≥ nu·ªët. H·∫°n ch·∫ø mu·ªëi, ƒë∆∞·ªùng, ch·∫•t b√©o b√£o h√≤a.", en: "Balanced and sufficient nutrients. Prioritize green vegetables, fruits, fish. Food should be soft, pureed if swallowing is difficult. Limit salt, sugar, saturated fats." } },
                    { name: { vi: "C√°ch cho ƒÉn an to√†n", en: "Safe Feeding Practices" }, desc: { vi: "Lu√¥n cho ƒÉn ·ªü t∆∞ th·∫ø ng·ªìi (ƒë·∫ßu cao 45-90 ƒë·ªô). ƒÇn ch·∫≠m, t·ª´ng mi·∫øng nh·ªè, ƒë·∫£m b·∫£o nu·ªët h·∫øt m·ªõi cho ƒÉn ti·∫øp.", en: "Always feed in a sitting position (head elevated 45-90 degrees). Feed slowly, in small bites, ensuring patient swallows completely before the next bite." } },
                    { name: { vi: "V·ªá sinh c√° nh√¢n", en: "Personal Hygiene" }, desc: { vi: "T·∫Øm r·ª≠a trong ph√≤ng k√≠n gi√≥, n∆∞·ªõc ·∫•m. Ch√∫ √Ω v·ªá sinh rƒÉng mi·ªáng h√†ng ng√†y ƒë·ªÉ ngƒÉn ng·ª´a nhi·ªÖm tr√πng.", en: "Bathe in a draft-free room with warm water. Pay attention to daily oral hygiene to prevent infections." } },
                    { name: { vi: "M√¥i tr∆∞·ªùng s·ªëng", en: "Living Environment" }, desc: { vi: "Ph√≤ng ·ªëc tho√°ng ƒë√£ng, ƒë·ªß √°nh s√°ng, an to√†n (tr√°nh v·∫≠t c·∫£n, s√†n nh√† tr∆°n tr∆∞·ª£t). ƒê·∫∑t c√°c v·∫≠t d·ª•ng c·∫ßn thi·∫øt trong t·∫ßm v·ªõi c·ªßa b·ªánh nh√¢n.", en: "Room should be airy, well-lit, safe (avoid obstacles, slippery floors). Place essential items within the patient's reach." } }
                ]
            }
        ]
    };

    const translations = {
        vi: {
            appTitle: "C·∫©m Nang Ph·ª•c H·ªìi Sau ƒê·ªôt Qu·ªµ",
            navOverview: "T·ªïng Quan",
            navMotorSkills: "V·∫≠n ƒê·ªông",
            navCommunication: "Giao Ti·∫øp",
            navCognitionEmotion: "T∆∞ Duy & Tinh Th·∫ßn",
            navDailyCare: "ChƒÉm S√≥c H√†ng Ng√†y",
            journeyTitle: "H√†nh Tr√¨nh Ph·ª•c H·ªìi To√†n Di·ªán",
            journeyDesc: "Ph·ª•c h·ªìi sau ƒë·ªôt qu·ªµ l√† m·ªôt qu√° tr√¨nh l√¢u d√†i, ƒë√≤i h·ªèi s·ª± ki√™n tr√¨ v√† m·ªôt c√°ch ti·∫øp c·∫≠n to√†n di·ªán. ·ª®ng d·ª•ng n√†y cung c·∫•p c√°c chi·∫øn l∆∞·ª£c v√† th√¥ng tin c·∫ßn thi·∫øt ƒë·ªÉ h·ªó tr·ª£ ng∆∞·ªùi chƒÉm s√≥c, gi√∫p b·ªánh nh√¢n t·ªëi ƒëa h√≥a kh·∫£ nƒÉng ph·ª•c h·ªìi, t·ª´ v·∫≠n ƒë·ªông, giao ti·∫øp ƒë·∫øn t∆∞ duy v√† tinh th·∫ßn, nh·∫±m n√¢ng cao ch·∫•t l∆∞·ª£ng cu·ªôc s·ªëng.",
            brunnstromTitle: "C√°c Giai ƒêo·∫°n Ph·ª•c H·ªìi V·∫≠n ƒê·ªông (Brunnstrom)",
            brunnstromDesc: "Hi·ªÉu r√µ c√°c giai ƒëo·∫°n ph·ª•c h·ªìi gi√∫p b·∫°n nh·∫≠n bi·∫øt ti·∫øn tri·ªÉn v√† l·ª±a ch·ªçn b√†i t·∫≠p ph√π h·ª£p. S·ª± xu·∫•t hi·ªán c·ªßa co c·ª©ng (Giai ƒëo·∫°n 2-3) l√† m·ªôt d·∫•u hi·ªáu t√≠ch c·ª±c, cho th·∫•y n√£o b·ªô ƒëang t√°i t·∫°o k·∫øt n·ªëi th·∫ßn kinh. H√£y nh·∫•p v√†o t·ª´ng giai ƒëo·∫°n ƒë·ªÉ xem chi ti·∫øt.",
            factorsTitle: "Y·∫øu T·ªë ·∫¢nh H∆∞·ªüng ƒê·∫øn Ph·ª•c H·ªìi",
            factorsDesc: "Nhi·ªÅu y·∫øu t·ªë t√°c ƒë·ªông ƒë·∫øn qu√° tr√¨nh ph·ª•c h·ªìi. Vi·ªác can thi·ªáp s·ªõm v√† t√≠ch c·ª±c v√†o c√°c y·∫øu t·ªë c√≥ th·ªÉ thay ƒë·ªïi s·∫Ω c·∫£i thi·ªán ƒë√°ng k·ªÉ ti√™n l∆∞·ª£ng cho b·ªánh nh√¢n.",
            conditionsTitle: "C√°c V·∫•n ƒê·ªÅ Ph·ªï Bi·∫øn Sau ƒê·ªôt Qu·ªµ",
            conditionsDesc: "B·ªánh nh√¢n th∆∞·ªùng ƒë·ªëi m·∫∑t v·ªõi nhi·ªÅu th√°ch th·ª©c v·ªÅ th·ªÉ ch·∫•t v√† t√¢m l√Ω. Nh·∫≠n bi·∫øt s·ªõm c√°c v·∫•n ƒë·ªÅ n√†y l√† b∆∞·ªõc ƒë·∫ßu ti√™n ƒë·ªÉ c√≥ bi·ªán ph√°p can thi·ªáp ph√π a.h·ª£p.",
            motorRehabTitle: "Ph·ª•c H·ªìi Ch·ª©c NƒÉng V·∫≠n ƒê·ªông",
            motorRehabDesc: "V·∫≠t l√Ω tr·ªã li·ªáu s·ªõm v√† li√™n t·ª•c l√† ch√¨a kh√≥a ƒë·ªÉ l·∫•y l·∫°i kh·∫£ nƒÉng v·∫≠n ƒë·ªông, ngƒÉn ng·ª´a bi·∫øn ch·ª©ng v√† gi√∫p b·ªánh nh√¢n t·ª´ng b∆∞·ªõc ƒë·ªôc l·∫≠p. M·ª•c ti√™u l√† ti·∫øn tri·ªÉn t·ª´ c√°c b√†i t·∫≠p th·ª• ƒë·ªông sang ch·ªß ƒë·ªông, t·ª´ n·∫±m tr√™n gi∆∞·ªùng ƒë·∫øn di chuy·ªÉn.",
            commImproveTitle: "C·∫£i Thi·ªán Kh·∫£ NƒÉng Giao Ti·∫øp",
            commImproveDesc: "Giao ti·∫øp l√† c·∫ßu n·ªëi v·ªõi th·∫ø gi·ªõi. Khi l·ªùi n√≥i g·∫∑p kh√≥ khƒÉn, c√°c li·ªáu ph√°p ng√¥n ng·ªØ v√† c√¥ng ngh·ªá h·ªó tr·ª£ s·∫Ω m·ªü ra nh·ªØng c√°nh c·ª≠a m·ªõi, gi√∫p b·ªánh nh√¢n b√†y t·ªè suy nghƒ©, c·∫£m x√∫c v√† gi·∫£m c·∫£m gi√°c b·ªã c√¥ l·∫≠p.",
            langDisorderTitle: "C√°c D·∫°ng R·ªëi Lo·∫°n Ng√¥n Ng·ªØ Ph·ªï Bi·∫øn",
            langDisorderDesc: "T√πy v√†o v√πng n√£o b·ªã t·ªïn th∆∞∆°ng, b·ªánh nh√¢n c√≥ th·ªÉ g·∫∑p c√°c d·∫°ng r·ªëi lo·∫°n ng√¥n ng·ªØ kh√°c nhau. Nh·∫•p ƒë·ªÉ t√¨m hi·ªÉu ƒë·∫∑c ƒëi·ªÉm c·ªßa t·ª´ng lo·∫°i.",
            cognitionSpiritTitle: "Nu√¥i D∆∞·ª°ng T∆∞ Duy & Tinh Th·∫ßn",
            cognitionSpiritDesc: "V∆∞·ª£t qua tr·∫°ng th√°i \"b·ªã ƒë·ªông\" v√† \"b·∫•t l·ª±c h·ªçc ƒë∆∞·ª£c\" l√† m·ªôt cu·ªôc chi·∫øn quan tr·ªçng. C√°c b√†i t·∫≠p nh·∫≠n th·ª©c v√† h·ªó tr·ª£ c·∫£m x√∫c gi√∫p b·ªánh nh√¢n t√°i k√≠ch ho·∫°t t∆∞ duy, t√¨m l·∫°i ni·ªÅm vui v√† ch·ªß ƒë·ªông tham gia v√†o cu·ªôc s·ªëng.",
            learnedHelplessnessTitle: "Ch·ªëng l·∫°i \"B·∫•t L·ª±c H·ªçc ƒê∆∞·ª£c\"",
            learnedHelplessnessDesc: "ƒê√¢y l√† tr·∫°ng th√°i t√¢m l√Ω khi·∫øn b·ªánh nh√¢n tin r·∫±ng h·ªç kh√¥ng th·ªÉ ki·ªÉm so√°t ho√†n c·∫£nh, d·∫´n ƒë·∫øn b·ªã ƒë·ªông. B·∫±ng c√°ch khuy·∫øn kh√≠ch c√°c l·ª±a ch·ªçn nh·ªè, cho ph√©p t·ª± l√†m v√† khen ng·ª£i n·ªó l·ª±c, ch√∫ng ta c√≥ th·ªÉ ph√° v·ª° v√≤ng lu·∫©n qu·∫©n n√†y v√† trao quy·ªÅn cho b·ªánh nh√¢n.",
            dailyCareTitle: "ChƒÉm S√≥c To√†n Di·ªán H√†ng Ng√†y",
            dailyCareDesc: "ChƒÉm s√≥c h√†ng ng√†y l√† n·ªÅn t·∫£ng v·ªØng ch·∫Øc cho qu√° tr√¨nh ph·ª•c h·ªìi. Vi·ªác ch√∫ √Ω ƒë·∫øn dinh d∆∞·ª°ng, v·ªá sinh, v√† ph√≤ng ng·ª´a bi·∫øn ch·ª©ng kh√¥ng ch·ªâ duy tr√¨ s·ª©c kh·ªèe th·ªÉ ch·∫•t m√† c√≤n th·ªÉ hi·ªán s·ª± quan t√¢m, t√¥n tr·ªçng ph·∫©m gi√° c·ªßa ng∆∞·ªùi b·ªánh.",
            disclaimer1: "Th√¥ng tin trong ·ª©ng d·ª•ng n√†y mang t√≠nh tham kh·∫£o, kh√¥ng thay th·∫ø cho ch·∫©n ƒëo√°n v√† ch·ªâ ƒë·ªãnh c·ªßa chuy√™n gia y t·∫ø.",
            disclaimer2: "Lu√¥n tham v·∫•n b√°c sƒ© v√† c√°c nh√† tr·ªã li·ªáu ƒë·ªÉ c√≥ k·∫ø ho·∫°ch chƒÉm s√≥c ph√π h·ª£p nh·∫•t.",
            copyright: "Copyright ¬© 2025 Nh·∫≠t Phan. All rights reserved.",
            chartFactorsLabels: ['M·ª©c ƒë·ªô t·ªïn th∆∞∆°ng', 'B·ªánh l√Ω n·ªÅn', 'Tu·ªïi t√°c', 'H·ªó tr·ª£ tinh th·∫ßn', 'Ph·ª•c h·ªìi ch·ª©c nƒÉng s·ªõm', 'C∆∞·ªùng ƒë·ªô luy·ªán t·∫≠p'],
            chartConditionsLabels: ['Tr·∫ßm c·∫£m', 'Lo √¢u', 'M·ªát m·ªèi m·∫°n t√≠nh', 'R·ªëi lo·∫°n ng√¥n ng·ªØ', 'ƒêau sau ƒë·ªôt qu·ªµ'],
            chartFactorsTooltip: 'M·ª©c ƒë·ªô',
            chartConditionsTooltip: 'b·ªánh nh√¢n',
        },
        en: {
            appTitle: "Stroke Rehabilitation Handbook",
            navOverview: "Overview",
            navMotorSkills: "Motor Skills",
            navCommunication: "Communication",
            navCognitionEmotion: "Cognition & Emotion",
            navDailyCare: "Daily Care",
            journeyTitle: "Comprehensive Rehabilitation Journey",
            journeyDesc: "Stroke recovery is a long journey, requiring perseverance and a holistic approach. This application provides essential strategies and information to support caregivers, helping patients maximize their recovery in motor skills, communication, cognition, and emotional well-being, thereby enhancing their quality of life.",
            brunnstromTitle: "Brunnstrom Stages of Motor Recovery",
            brunnstromDesc: "Understanding the recovery stages helps you recognize progress and choose appropriate exercises. The appearance of spasticity (Stages 2-3) is a positive sign, indicating the brain is reorganizing neural connections. Click on each stage for details.",
            factorsTitle: "Factors Affecting Recovery",
            factorsDesc: "Many factors influence the recovery process. Early and active intervention in modifiable factors can significantly improve the patient's prognosis.",
            conditionsTitle: "Common Post-Stroke Issues",
            conditionsDesc: "Patients often face various physical and psychological challenges. Early recognition of these issues is the first step towards appropriate interventions.",
            motorRehabTitle: "Motor Function Rehabilitation",
            motorRehabDesc: "Early and continuous physical therapy is key to regaining motor skills, preventing complications, and helping patients gradually become independent. The goal is to progress from passive to active exercises, from bedridden to mobile.",
            commImproveTitle: "Improving Communication Ability",
            commImproveDesc: "Communication is a bridge to the world. When speech is difficult, language therapies and assistive technologies open new doors, helping patients express thoughts and emotions and reduce feelings of isolation.",
            langDisorderTitle: "Common Types of Language Disorders",
            langDisorderDesc: "Depending on the affected brain area, patients may experience different types of language disorders. Click to learn about the characteristics of each type.",
            cognitionSpiritTitle: "Nurturing Cognition & Spirit",
            cognitionSpiritDesc: "Overcoming a state of \"passivity\" and \"learned helplessness\" is an important battle. Cognitive exercises and emotional support help patients reactivate their thinking, find joy, and actively participate in life.",
            learnedHelplessnessTitle: "Combating \"Learned Helplessness\"",
            learnedHelplessnessDesc: "This is a psychological state where patients believe they cannot control their circumstances, leading to passivity. By encouraging small choices, allowing self-reliance, and praising efforts, we can break this cycle and empower patients.",
            dailyCareTitle: "Comprehensive Daily Care",
            dailyCareDesc: "Daily care is the solid foundation for the recovery process. Paying attention to nutrition, hygiene, and complication prevention not only maintains physical health but also demonstrates care and respect for the patient's dignity.",
            disclaimer1: "The information in this application is for reference purposes only and does not replace the diagnosis and prescription of medical professionals.",
            disclaimer2: "Always consult doctors and therapists for the most suitable care plan.",
            copyright: "Copyright ¬© 2025 Nhat Phan. All rights reserved.",
            chartFactorsLabels: ['Extent of Brain Damage', 'Underlying Conditions', 'Age', 'Emotional Support', 'Early Rehab', 'Intensity of Training'],
            chartConditionsLabels: ['Depression', 'Anxiety', 'Chronic Fatigue', 'Language Disorder', 'Post-stroke Pain'],
            chartFactorsTooltip: 'Level',
            chartConditionsTooltip: 'patients',
        }
    };

    let currentLang = 'vi'; // Default language
    let currentBrunnstromStage = 1; // Track active Brunnstrom stage
    let currentAphasiaType = 'broca'; // Track active Aphasia type

    const navLinks = document.querySelectorAll('#main-nav a');
    const sections = document.querySelectorAll('.content-section');
    const langViBtn = document.getElementById('lang-vi-btn');
    const langEnBtn = document.getElementById('lang-en-btn');

    let factorsChartInstance = null;
    let conditionsChartInstance = null;

    // Define click listeners at a broader scope to allow removal
    let brunnstromClickListener = null;
    let aphasiaTabClickListener = null;


    function updateNav(sectionId) {
        navLinks.forEach(link => {
            link.classList.toggle('active', link.dataset.section === sectionId);
        });
        sections.forEach(section => {
            section.classList.toggle('active', section.id === sectionId);
        });
    }

    function applyTranslations() {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[currentLang][key]) {
                element.textContent = translations[currentLang][key];
            }
        });

        // Update active language button styles
        langViBtn.classList.toggle('bg-sky-100', currentLang === 'vi');
        langViBtn.classList.toggle('text-sky-700', currentLang === 'vi');
        langViBtn.classList.toggle('border-sky-300', currentLang === 'vi');
        langViBtn.classList.toggle('bg-white', currentLang === 'en');
        langViBtn.classList.toggle('text-stone-600', currentLang === 'en');
        langViBtn.classList.toggle('border-stone-300', currentLang === 'en');

        langEnBtn.classList.toggle('bg-sky-100', currentLang === 'en');
        langEnBtn.classList.toggle('text-sky-700', currentLang === 'en');
        langEnBtn.classList.toggle('border-sky-300', currentLang === 'en');
        langEnBtn.classList.toggle('bg-white', currentLang === 'vi');
        langEnBtn.classList.toggle('text-stone-600', currentLang === 'vi');
        langEnBtn.classList.toggle('border-stone-300', currentLang === 'vi');


        // Re-render accordions and other dynamic content that uses appData
        document.getElementById('motor-exercises').innerHTML = '';
        createAccordion(appData.motorExercises, 'motor-exercises', 'category', 'name', 'desc');
        
        document.getElementById('communication-strategies').innerHTML = '';
        createAccordion(appData.communicationStrategies, 'communication-strategies', 'category', 'name', 'desc');
        
        document.getElementById('cognitive-emotional-content').innerHTML = '';
        createAccordion(appData.cognitiveEmotional, 'cognitive-emotional-content', 'category', 'name', 'desc');
        
        document.getElementById('daily-care-content').innerHTML = '';
        createAccordion(appData.dailyCare, 'daily-care-content', 'category', 'name', 'desc');

        initBrunnstrom(); // Re-initialize Brunnstrom stages
        initAphasiaTabs(); // Re-initialize Aphasia tabs
        updateCharts(); // Update chart labels
    }

    function setLanguage(lang) {
        currentLang = lang;
        document.documentElement.lang = lang; // Update HTML lang attribute
        applyTranslations();
    }

    langViBtn.addEventListener('click', () => setLanguage('vi'));
    langEnBtn.addEventListener('click', () => setLanguage('en'));

    function createAccordion(data, containerId, categoryKey, nameKey, descKey) {
        const container = document.getElementById(containerId);
        data.forEach(category => {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'bg-white rounded-lg shadow-md mb-6';
            categoryDiv.innerHTML = `
                <button class="accordion-button w-full text-left p-4 flex justify-between items-center bg-stone-100 hover:bg-stone-200 transition duration-300 rounded-t-lg">
                    <span class="text-xl font-semibold text-sky-700 flex items-center">
                        <span class="mr-3 text-2xl">${category.icon}</span>
                        ${category[categoryKey][currentLang]}
                    </span>
                    <span class="transform transition-transform duration-300 text-sky-600 text-2xl font-light">+</span>
                </button>
                <div class="accordion-content">
                    <ul class="p-4 border-t border-stone-200">
                        ${category.items.map(item => `
                            <li class="py-3 border-b border-stone-100 last:border-b-0">
                                <p class="font-semibold text-stone-700">${item[nameKey][currentLang]}</p>
                                <p class="text-stone-600 text-sm">${item[descKey][currentLang]}</p>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
            container.appendChild(categoryDiv);
        });
        // Re-attach event listeners for newly created accordion buttons
        document.querySelectorAll(`#${containerId} .accordion-button`).forEach(button => {
            button.addEventListener('click', () => {
                const wasOpen = button.classList.contains('open');
                // Close all other accordions
                document.querySelectorAll('.accordion-button').forEach(btn => {
                    btn.classList.remove('open');
                    btn.querySelector('span:last-child').textContent = '+';
                    btn.querySelector('span:last-child').classList.remove('rotate-45');
                });

                if (!wasOpen) {
                    button.classList.add('open');
                    button.querySelector('span:last-child').textContent = '';
                    button.querySelector('span:last-child').innerHTML = '&times;';
                    button.querySelector('span:last-child').classList.add('rotate-45');
                }
            });
        });
    }
    
    // Initial creation (will be called again by applyTranslations)
    createAccordion(appData.motorExercises, 'motor-exercises', 'category', 'name', 'desc');
    createAccordion(appData.communicationStrategies, 'communication-strategies', 'category', 'name', 'desc');
    createAccordion(appData.cognitiveEmotional, 'cognitive-emotional-content', 'category', 'name', 'desc');
    createAccordion(appData.dailyCare, 'daily-care-content', 'category', 'name', 'desc');
    
    function initBrunnstrom() {
        const container = document.getElementById('brunnstrom-stages');
        const detailsDiv = document.getElementById('brunnstrom-details');
        container.innerHTML = ''; // Clear existing content

        appData.brunnstrom.forEach(stage => {
            const stageDiv = document.createElement('div');
            stageDiv.className = 'p-2 border-2 border-stone-200 rounded-lg cursor-pointer hover:bg-amber-100 hover:border-amber-400 transition duration-300 flex flex-col justify-center';
            stageDiv.dataset.stage = stage.stage;
            stageDiv.innerHTML = `<span class="font-bold text-lg text-sky-600">${stage.stage}</span><span>${stage.name[currentLang]}</span>`;
            container.appendChild(stageDiv);
        });

        function updateDetails(stageNum) {
            currentBrunnstromStage = stageNum; // Update state variable
            const stageData = appData.brunnstrom.find(s => s.stage == stageNum);
            detailsDiv.innerHTML = `<p class="font-semibold">${stageData.stage}. ${stageData.name[currentLang]}</p><p>${stageData.desc[currentLang]}</p>`;
            container.querySelectorAll('div').forEach(div => {
                div.classList.toggle('bg-amber-200', div.dataset.stage == stageNum);
                div.classList.toggle('border-amber-500', div.dataset.stage == stageNum);
            });
        }

        // Remove old listener if it exists
        if (brunnstromClickListener) {
            container.removeEventListener('click', brunnstromClickListener);
        }

        // Create and add new listener
        brunnstromClickListener = function(e) {
            const target = e.target.closest('div[data-stage]');
            if (target) {
                updateDetails(parseInt(target.dataset.stage)); // Ensure integer
            }
        };
        container.addEventListener('click', brunnstromClickListener);

        // Update the displayed details with the *current* stage after recreation
        updateDetails(currentBrunnstromStage);
    }
    
    function initAphasiaTabs() {
        const tabsContainer = document.getElementById('aphasia-tabs');
        const contentContainer = document.getElementById('aphasia-content');
        tabsContainer.innerHTML = ''; // Clear existing content
        
        appData.aphasiaTypes.forEach(type => {
            const button = document.createElement('button');
            button.className = 'aphasia-tab-btn px-3 py-1 text-sm font-medium text-stone-600 bg-white border border-stone-300 rounded-full hover:bg-sky-100 hover:border-sky-400 transition';
            button.dataset.type = type.id;
            button.textContent = type.name[currentLang];
            tabsContainer.appendChild(button);
        });

        function updateContent(typeId) {
            currentAphasiaType = typeId; // Update state variable
            const typeData = appData.aphasiaTypes.find(t => t.id === typeId);
            contentContainer.innerHTML = `<p class="font-semibold">${typeData.name[currentLang]}</p><p>${typeData.desc[currentLang]}</p>`;
            tabsContainer.querySelectorAll('button').forEach(btn => {
                btn.classList.toggle('bg-sky-600', btn.dataset.type === typeId);
                btn.classList.toggle('text-white', btn.dataset.type === typeId);
                btn.classList.toggle('border-sky-600', btn.dataset.type === typeId);
            });
        }

        // Remove old listener if it exists
        if (aphasiaTabClickListener) {
            tabsContainer.removeEventListener('click', aphasiaTabClickListener);
        }
        // Create and add new listener
        aphasiaTabClickListener = function(e) {
            if (e.target.tagName === 'BUTTON') {
                updateContent(e.target.dataset.type);
            }
        };
        tabsContainer.addEventListener('click', aphasiaTabClickListener);

        // Update the displayed content with the *current* type after recreation
        updateContent(currentAphasiaType);
    }

    function updateCharts() {
        // Factors Chart
        const factorsCtx = document.getElementById('factorsChart').getContext('2d');
        if (factorsChartInstance) {
            factorsChartInstance.data.labels = translations[currentLang].chartFactorsLabels;
            factorsChartInstance.data.datasets[0].label = translations[currentLang].chartFactorsTooltip;
            factorsChartInstance.options.plugins.tooltip.callbacks.label = function(context) {
                let label = context.dataset.label || '';
                if (label) {
                    label += ': ';
                }
                if (context.parsed.x !== null) {
                    label += `${translations[currentLang].chartFactorsTooltip} ${context.parsed.x}`;
                }
                return label;
            };
            factorsChartInstance.update();
        } else {
            factorsChartInstance = new Chart(factorsCtx, {
                type: 'bar',
                data: {
                    labels: translations[currentLang].chartFactorsLabels,
                    datasets: [{
                        label: translations[currentLang].chartFactorsTooltip,
                        data: [95, 75, 70, 85, 90, 88],
                        backgroundColor: ['#f59e0b', '#f59e0b', '#f59e0b', '#0ea5e9', '#0ea5e9', '#0ea5e9'],
                        borderColor: 'rgba(255, 255, 255, 0.5)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += `${translations[currentLang].chartFactorsTooltip} ${context.parsed.x}`;
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: { suggestedMax: 100, grid: { color: '#e7e5e4' } },
                        y: { grid: { display: false } }
                    }
                }
            });
        }

        // Conditions Chart
        const conditionsCtx = document.getElementById('conditionsChart').getContext('2d');
        if (conditionsChartInstance) {
            conditionsChartInstance.data.labels = translations[currentLang].chartConditionsLabels;
            conditionsChartInstance.data.datasets[0].label = translations[currentLang].chartConditionsTooltip;
            conditionsChartInstance.options.plugins.tooltip.callbacks.label = function(context) {
                let label = context.label || '';
                if (label) {
                    label += ': ';
                }
                if (context.parsed !== null) {
                    label += `~${context.parsed}% ${translations[currentLang].chartConditionsTooltip}`;
                }
                return label;
            };
            conditionsChartInstance.update();
        } else {
            conditionsChartInstance = new Chart(conditionsCtx, {
                type: 'doughnut',
                data: {
                    labels: translations[currentLang].chartConditionsLabels,
                    datasets: [{
                        label: translations[currentLang].chartConditionsTooltip,
                        data: [35, 25, 50, 66, 40],
                        backgroundColor: ['#0284c7', '#38bdf8', '#7dd3fc', '#f59e0b', '#fbbf24'],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { padding: 15 }
                        },
                        title: { display: false },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += `~${context.parsed}% ${translations[currentLang].chartConditionsTooltip}`;
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
    }

    function handleRouting() {
        const hash = window.location.hash.replace('#', '');
        const validSections = ['tong-quan', 'van-dong', 'giao-tiep', 'tu-duy', 'cham-soc'];
        const sectionId = validSections.includes(hash) ? hash : 'tong-quan';
        updateNav(sectionId);
    }

    window.addEventListener('popstate', handleRouting);
    
    // Initial load
    // The order here is important. First set the language, which will call applyTranslations.
    // applyTranslations now handles recreating accordions, Brunnstrom, Aphasia, and charts.
    setLanguage('vi'); // Ensure initial language is set and translations applied.
    handleRouting();
});
</script>

</body>
</html>
